#!/bin/sh

prefix=/usr/local
opt=false
dbg=true

while [ $# != 0 ]; do
	case $1 in
	--prefix=*)
		prefix=`echo $1 | sed 's/^--prefix=//'`
		;;
	--enable-opt)
		opt=true
		;;
	--disable-opt)
		opt=false
		;;
	--enable-dbg)
		dbg=true
		;;
	--disable-dbg)
		dbg=false
		;;
	esac
	shift
done

echo 'Configuring librbtree...'

echo "# do not modify this file manually, it's generated by configure" >Makefile
echo "PREFIX = $prefix" >>Makefile
$opt && echo '-O3' | xargs echo 'opt =' >>Makefile
$dbg && echo '-g' | xargs echo 'dbg =' >>Makefile
cat Makefile.in >>Makefile

echo 'Done. Run make (or gmake) to compile.'
